/**
 * (c) Facebook, Inc. and its affiliates. Confidential and proprietary.
 *
 * @format
 */

'use strict';

const prettier = require('prettier');
const rpc = require('vscode-jsonrpc');

const connection = rpc.createMessageConnection(
  new rpc.StreamMessageReader(process.stdin),
  new rpc.StreamMessageWriter(process.stdout),
);

connection.onRequest('format', (content, options) => {
  try {
    return {error: null, formatted: prettier.format(content, options)};
  } catch (e) {
    return {error: e.toString()};
  }
});

connection.listen();
