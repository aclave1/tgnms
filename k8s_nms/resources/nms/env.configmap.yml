apiVersion: v1
kind: ConfigMap
metadata:
  name: cxl-database
data:
  MYSQL_HOST: db
  MYSQL_PASS: "{{ db_root_password }}"
  MYSQL_USER: root
  MYSQL_PORT: "3306"
  MYSQL_DB: cxl
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nms
data:
  BQS: http://query_service:8086
  NETWORK: default_networks
  NODE_ENV: production
  E2E_DL_URL: http://nms
  MAPBOX_ACCESS_TOKEN: pk.eyJ1IjoiZmJtYXBzIiwiYSI6ImNrM2FhZzR5ZTBhZ3gzZHJ0dHp2NmF1amIifQ.tnJdP1DGExTYdVibXFYWFA
  ISSUES_URL: https://fburl.com/tasks/gl8ngcfa

  NODE_VERSION: 11.7.0
  YARN_VERSION: 1.13.0
  CLIENT_ROOT_URL: http://{{ext_nms_hostname}}

  STATS_BACKEND: prometheus
  {% if nms_software_portal_api_id is defined and nms_software_portal_api_key is defined %}
  SOFTWARE_PORTAL_ENABLED: "true"
  SOFTWARE_PORTAL_URL: https://sw.terragraph.link
  SOFTWARE_PORTAL_API_TOKEN: {{ nms_software_portal_api_key }}
  SOFTWARE_PORTAL_API_ID: {{ nms_software_portal_api_id }}
  {% endif %}

  ALARMS_ENABLED: "true"
  ALERTMANAGER_URL: http://alertmanager:9093
  PROMETHEUS_CONFIG_URL: http://prometheus_configurer:9100
  ALERTMANAGER_CONFIG_URL: http://alertmanager_configurer:9101
  TG_ALARM_URL: http://alarms:40000
  NMS_SETTINGS_ENABLED: "true"
  NMS_SETTINGS_FILE: .settings/settings.json
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana
data:
  # needed for re-writing grafana URLs through nginx
  GF_AUTH_ANONYMOUS_ENABLED: "true"
  GF_SERVER_ROOT_URL: "%(protocol)s://%(domain)s/grafana/"
  # allow iframe for NMS
  GF_SECURITY_ALLOW_EMBEDDING: "true"
  # environment variables used by Grafana
  GRAFANA_DB: grafana
  # TODO: Make this password not "test"
  GRAFANA_ADMIN_PASS: test
  GRAFANA_MYSQL_READER: grafanaReader
  GRAFANA_MYSQL_READER_PASS: uMDC36aagIUR
  GRAFANA_MYSQL_WRITER: grafanaWriter
  GRAFANA_MYSQL_WRITER_PASS: guHXwEDduo78
