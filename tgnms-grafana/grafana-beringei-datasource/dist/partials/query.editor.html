<query-editor-row query-ctrl="ctrl" class="generic-datasource-query-row" has-text-edit-mode="true">
  <div class="gf-form-inline">

    <div class="gf-form" ng-if="ctrl.target.rawQuery">
      <textarea class="gf-form-input" rows="5" ng-model="ctrl.target.target" spellcheck="false" ng-blur="ctrl.onChangeInternal()" />
    </div>

    <div ng-if="!ctrl.target.rawQuery">
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-10">Key</label>
        <div class="gf-form max-width-32">
        <gf-form-dropdown model="ctrl.target.keyname"
          allow-custom="true"
          lookup-text="false"
          get-options="ctrl.getKeys($query)"
          on-change="ctrl.onChangeInternal()">
      </gf-form-dropdown>
      </div>
      </div>

      <div class="gf-form" ng-if="ctrl.target.refId == 'A'">
        <label class="gf-form-label query-keyword width-10">Source Restrictor</label>
        <div class="gf-form max-width-50">
          <info-popover mode="right-absolute">
            Either node names or MAC addresses.
            Comma-separated list. Applies to all queries.
          </info-popover>
          <input type="text" class="gf-form-input" ng-model="ctrl.target.restrictor" spellcheck='false' placeholder="restrictors"
          data-min-length=0 data-items=1000 ng-model-onblur ng-change="ctrl.onChangeInternal()">
        </input>
        </div>
        </div>

      <div class="gf-form" ng-if="ctrl.target.refId == 'A'">
        <label class="gf-form-label query-keyword width-10">Beringei Source</label>
        <div class="gf-form max-width-32">
        <gf-form-dropdown model="ctrl.target.beringeisource"
          allow-custom="false"
          lookup-text="true"
          get-options="ctrl.getBeringeiSource()"
          on-change="ctrl.onChangeInternal()">
      </gf-form-dropdown>
      </div>
      </div>
      
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-10">Scale</label>
        <div class="gf-form max-width-32">
	  <input type="text" class="gf-form-input" ng-model="ctrl.target.scale" placeholder="Scale" ng-change="ctrl.onScaleChange()"></input>
        </div>
      </div>
    </div>

  </div>
</query-editor-row>
